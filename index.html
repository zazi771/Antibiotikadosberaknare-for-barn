<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Doskalkylatör för antibiotika till barn</title>
    <style>
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        div { margin-bottom: 10px; }
        select, input { width: 100%; padding: 5px; }
        #message, #warning-message { background-color: #fffbe6; padding: 10px; margin-bottom: 10px; display: none; }
        #result { background-color: #e6ffe6; padding: 10px; display: none; }
        .hidden { display: none; }
        #recommended-dose { background-color: #e6ffe6; }
        #formula-explanation { background-color: #f0f0f0; padding: 15px; margin-top: 20px; border-radius: 5px; }
    </style>
</head>
<body>
<div class="container">
    <h1>Doskalkylatör för antibiotika till barn</h1>

    <table>
        <tr>
            <th>Preparat</th>
            <th>Vuxna</th>
            <th>Barn</th>
        </tr>
        <tr>
            <td>Penicillin V</td>
            <td>1,6 g 3 gånger/dygn, 5-7 dagar</td>
            <td>25 mg/kg 3 gånger/dygn, 5-7 dagar</td>
        </tr>
        <tr>
            <td>Metronidazol</td>
            <td>400 mg 3 gånger/dygn, 5-7 dagar</td>
            <td>7,5 mg/kg 3 gånger/dygn, 5-7 dagar</td>
        </tr>
        <tr>
            <td>Klindamycin</td>
            <td>150 mg 3 gånger/dygn, 5-7 dagar</td>
            <td>5 mg/kg 3 gånger/dygn, 5-7 dagar</td>
        </tr>
    </table>

    <div>
        <label for="reason">Varför vill du förskriva antibiotika?</label>
        <select id="reason">
            <option value="">Välj anledning...</option>
            <option value="fistel">Fistel</option>
            <option value="abscess">Abscess, patienten har påverkat allmäntillstånd</option>
            <option value="sinus">Sinuskommunikation till frisk bihåla i samband med tandextraktion</option>
            <option value="replantation">Vid replantation av exartikulerad tand</option>
            <option value="osteomyelit">Osteomyelit, osteoradionekros och läkemedelsrelaterad osteonekros (MRONJ)</option>
        </select>
    </div>

    <div id="message"></div>

    <div id="antibiotic-section" class="hidden">
        <div>
            <label for="antibiotic">Antibiotika:</label>
            <select id="antibiotic">
                <option value="">Välj antibiotika...</option>
                <option value="penicillin">Penicillin V (Kåvepenin)</option>
                <option value="metronidazol">Metronidazol (Flagyl)</option>
                <option value="klindamycin">Klindamycin (Dalacin)</option>
            </select>
        </div>

        <div id="formulation-section">
            <label for="formulation">Formulering:</label>
            <select id="formulation">
                <option value="">Välj formulering...</option>
            </select>
        </div>

        <div>
            <label for="recommended-dose-mg-kg">Rekommenderad dos:</label>
            <input type="text" id="recommended-dose-mg-kg" readonly>
        </div>

        <div id="weight-section">
            <label for="weight">Barnets vikt (kg):</label>
            <input type="number" id="weight" min="0" step="0.1">
        </div>

        <div id="calculated-dose-section">
    <label for="recommended-dose">Beräknad dos (ml) (3 gånger/dygn, 5-7 dagar):</label>
    <input type="text" id="recommended-dose" readonly>
</div>

    </div>

    <div id="dalacin-table" class="hidden">
        <h3>Doseringstabell för Dalacin (klindamycin)</h3>
        <table>
            <tr>
                <th>Vikt kg</th>
                <th>Ålder år</th>
                <th>Dygnsdos</th>
                <th>Antal förpackningar per 10 dagar</th>
            </tr>
            <tr>
                <td>&lt;10</td>
                <td>0-1</td>
                <td>2,5 ml x 3</td>
                <td>1</td>
            </tr>
            <tr>
                <td>10-15</td>
                <td>1-3</td>
                <td>3,5 ml x 3</td>
                <td>2</td>
            </tr>
            <tr>
                <td>15-20</td>
                <td>3-6</td>
                <td>5 ml x 3</td>
                <td>2</td>
            </tr>
            <tr>
                <td>20-30</td>
                <td>6-9</td>
                <td>7 ml x 3</td>
                <td>3</td>
            </tr>
            <tr>
                <td>&gt;30</td>
                <td>9-12</td>
                <td>10 ml x 3</td>
                <td>4</td>
            </tr>
        </table>
        <p>Pediatrisk population: 15 mg/kg (=1 ml/kg) och dygn uppdelat på 3 doser. Maximal dos är 20 mg/kg/dygn och vid denna dos bör dosering ske 4 gånger dagligen. Absorptionen påverkas ej av samtidigt födointag.</p>
    </div>

    <div id="formula-explanation">
        <h3>Förklaring av doseringsformler</h3>
        <p>Formlerna som används för att beräkna doseringen av antibiotika baseras på barnets vikt och läkemedlets koncentration. Så här beräknas de:</p>
        <ul>
            <li><strong>Dos i ml (för flytande beredningar):</strong> (Barnets vikt (kg) × Rekommenderad dos (mg/kg)) ÷ Läkemedlets koncentration (mg/ml)</li>
        </ul>
        <p>Specifika exempel per antibiotika:</p>
        <ul>
            <li><strong>Penicillin V:</strong> 25 mg/kg × barnets vikt</li>
            <li><strong>Metronidazol:</strong> 7,5 mg/kg × barnets vikt</li>
            <li><strong>Klindamycin:</strong> 5 mg/kg 3 gånger/dygn, 5-7 dagar</li>
        </ul>
        <p>Den beräknade dosen avrundas till andra decimalen för ml.</p>
<p><span style="color: red;">Obs: För Dalacin (Klindamycin) används en specifik doseringstabell baserad på barnets vikt och ålder.</span>
<div style="color: blue;">
    <h3>Förklaring av diskrepans i Klindamycin (Dalacin) dosering</h3>
    <p>Det finns en märkbar skillnad mellan den generella doseringsrekommendationen och tabellen för Klindamycin (Dalacin). Här är en analys av denna diskrepans:</p>
    <p>Den generella rekommendationen är 15 mg/kg/dygn uppdelat på 3 doser, vilket motsvarar 5 mg/kg 3 gånger per dygn. För ett barn som väger 20 kg skulle detta teoretiskt innebära: 20 kg × 5 mg/kg = 100 mg per dos, eller 6,67 ml om koncentrationen är 15 mg/ml. Dock visar tabellen att för barn mellan 15-20 kg är den rekommenderade dosen 5 ml × 3.</p>
    <p>Denna skillnad kan bero på flera faktorer:</p>
    <ul>
        <li>Säkerhetsmarginal: Tabellen kan presentera en något lägre dos för att ge utrymme för justeringar vid behov.</li>
        <li>Praktisk dosering: 5 ml kan vara enklare att mäta upp och administrera än 6,67 ml.</li>
        <li>Åldersbaserad justering: Tabellen tar hänsyn till både vikt och ålder, vilket kan leda till små justeringar i doseringen.</li>
        <li>Maximal dos: Tabellen kan vara utformad för att säkerställa att dosen inte överskrider den maximala dosen på 20 mg/kg/dygn, även för barn i den övre delen av viktintervallet.</li>
    </ul>
    <p>Det är viktigt att notera att tabellen ger en standardiserad dosering som kan vara lättare att följa i praktiken, medan den generella rekommendationen ger en mer exakt beräkning baserad på barnets specifika vikt.</p>
    <p>För säker användning bör läkare och vårdgivare alltid följa de officiella riktlinjerna och använda sitt kliniska omdöme för att anpassa doseringen till den enskilda patientens behov och omständigheter.</p>
  </div>
</div>

<script>
    const antibiotics = {
        penicillin: { 
            dose: 25, 
            timesPerDay: 3, 
            durationDays: "5-7",
            formulations: [
                { name: "Oral suspension 100 mg/ml", concentration: 100 },
                { name: "Orala droppar 250 mg/ml", concentration: 250 },
                { name: "Granulat för oral suspension 250 mg", concentration: 250 }
            ]
        },
        metronidazol: { 
            dose: 7.5, 
            timesPerDay: 3, 
            durationDays: "5-7",
            formulations: [
                { name: "Oral suspension 40 mg/ml", concentration: 40 }
            ]
        },
        klindamycin: { 
            dose: 5, 
            timesPerDay: 3, 
            durationDays: "5-7",
            formulations: [
                { name: "Oral lösning 15 mg/ml", concentration: 15 }
            ]
        }
    };

    const reasons = {
        fistel: "Fistel är ingen indikation för antibiotikabehandling.",
        abscess: "I tillägg till antibiotika, utför dränering om det behövs.",
        sinus: "Vid dessa tillfällen bör antibiotika användas som tilläggsbehandling till dränage. Antibiotika som enda behandling ska endast ges vid särskilda fall där dränage inte är möjligt. 2 g amoxicillin alternativt 600 mg klindamycin vid PCallergi",
        replantation: "rekommenderas systemisk antibiotikabehandling.",
        osteomyelit: "Osteomyelit, osteoradionekros och läkemedelsrelaterad osteonekros (MRONJ) är speciella tillstånd som bör behandlas av eller i samråd med specialisttandvård."
    };

    document.getElementById('reason').addEventListener('change', function() {
        const reason = this.value;
        const messageDiv = document.getElementById('message');
        const antibioticSection = document.getElementById('antibiotic-section');
        const antibioticSelect = document.getElementById('antibiotic');

        if (reason) {
            messageDiv.textContent = reasons[reason];
            messageDiv.style.display = 'block';

            if (reason === 'fistel' || reason === 'osteomyelit' || reason === 'sinus') {
                antibioticSection.classList.add('hidden');
                antibioticSelect.value = '';
                antibioticSelect.disabled = true;
            } else {
                antibioticSection.classList.remove('hidden');
                antibioticSelect.disabled = false;
            }
        } else {
            messageDiv.style.display = 'none';
            antibioticSection.classList.add('hidden');
            antibioticSelect.disabled = false;
        }
    });

    document.getElementById('antibiotic').addEventListener('change', function() {
        const antibiotic = this.value;
        const formulationSection = document.getElementById('formulation-section');
        const formulationSelect = document.getElementById('formulation');
        const dalacinTable = document.getElementById('dalacin-table');
        const recommendedDoseMgKg = document.getElementById('recommended-dose-mg-kg');

        formulationSelect.innerHTML = '<option value="">Välj formulering...</option>';
        if (antibiotic && antibiotics[antibiotic]) {
            antibiotics[antibiotic].formulations.forEach(formulation => {
                const option = document.createElement('option');
                option.value = formulation.concentration;
                option.textContent = formulation.name;
                formulationSelect.appendChild(option);
            });
            formulationSection.style.display = 'block';
            dalacinTable.style.display = antibiotic === 'klindamycin' ? 'block' : 'none';
            recommendedDoseMgKg.value = `${antibiotics[antibiotic].dose} mg/kg`;
        } else {
            formulationSection.style.display = 'none';
            dalacinTable.style.display = 'none';
            recommendedDoseMgKg.value = '';
        }
    });

    document.getElementById('weight').addEventListener('input', calculateDose);
    document.getElementById('formulation').addEventListener('change', calculateDose);

    function calculateDose() {
        const antibiotic = document.getElementById('antibiotic').value;
        const weight = parseFloat(document.getElementById('weight').value);
        const concentration = parseFloat(document.getElementById('formulation').value);
        const recommendedDose = document.getElementById('recommended-dose');

        if (antibiotic && weight && concentration) {
            const antibioticData = antibiotics[antibiotic];
            const dose = antibioticData.dose * weight;
            const doseMl = (dose / concentration).toFixed(2);
            recommendedDose.value = `${doseMl} ml, ${antibioticData.timesPerDay} ggr/dygn, ${antibioticData.durationDays} dagar`;
        } else {
            recommendedDose.value = '';
        }
    }
</script>
</body>
</html>
